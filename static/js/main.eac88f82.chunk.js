(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{20:function(e,n,t){},22:function(e,n,t){"use strict";t.r(n);var r=t(7),a=t(8),c=t(15),o=t(12),i=t(1),l=t.n(i),s=t(9),u=t.n(s),d=(t(20),t(13)),j=t(10),b=function(e,n,t){var r,a=n.split(/[\]\[\.]/).filter((function(e){return e})),c=e,o=Object(j.a)(a);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==c||void 0===c[i])return t;c=c[i]}}catch(l){o.e(l)}finally{o.f()}return c},m=function e(n){var t=Array.isArray(n)?[]:{};for(var r in n){var a=n[r];t[r]=a&&"object"===typeof a?e(a):a}return t},f=function(e,n,t){return Object(e)!==e||(Array.isArray(n)||(n=n.toString().match(/[^.[\]]+/g)||[]),n.slice(0,-1).reduce((function(e,t,r){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(n[r+1])>>0===+n[r+1]?[]:{}}),e)[n[n.length-1]]=t),e},v=function(e){return null===e},h=function(e){return"string"===typeof e},A=function(e){return!Number.isNaN(e)},O={isRequired:function(e){return!(v(n=e)||function(e){return void 0===e}(n)||function(e){return h(e)&&0===e.trim().length}(e));var n},isBetween:function(e,n){var t=n.min,r=n.max;return A(e)&&e<=r&&e>=t},isNumber:A},p=function(e,n){var t=Object.keys(n),r=[];return t.forEach((function(t){var a=n[t].meta?n[t].meta:null;(n[t].validationFunction?n[t].validationFunction:O[t])(e,a)||(r.push(n[t].errorText),console.error("Rule ".concat(t," is violated")))})),r};function x(e,n){switch(n.type){case"CHANGED_FIELD":case"ARRAY_MUTATED":return n.payload;default:throw new Error("Action required in reducer")}}var g=t(0),N=Object(i.createContext)(null),C=function(e){var n=e.children,t=e.val;return Object(g.jsx)(N.Provider,{value:t,children:n})},y=function(e){var n=e.initialValues,t=e.children,r=function(e,n,t){var r=Object(i.useRef)(m(e)),a=Object(i.useReducer)(x,{formValues:m(e),formErrors:{},isDirty:!1}),c=Object(d.a)(a,2),o=c[0],l=c[1],s=function(e,n){var t,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a?(t=a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null):(e.persist(),t=e.target.name,r=e.target.value);var c=m(o);c.isDirty=!0;var i=".formValues.".concat(t),s=p(r,n);f(c,i,r),c.formErrors[t]=s,l({type:"CHANGED_FIELD",payload:c})},u={push:function(e,n){var t=m(e),r=m(o);return b(r,".formValues.".concat(n),[]).push(t),l({type:"ARRAY_MUTATED",payload:r}),r},getArrayValues:function(e){return b(o,".formValues.".concat(e),[])},removeAt:function(e,n){var t=m(o);b(t,".formValues.".concat(e),[]).splice(n,1),l({type:"ARRAY_MUTATED",payload:t})},setField:function(e,n,t){setTimeout((function(){return s(null,t,e,n)}),0)},revertForm:function(){var e={formValues:r.current,formErrors:{},isDirty:!1};l({type:"ARRAY_MUTATED",payload:e}),console.log(r.current)}};return{formValues:o.formValues,formErrors:o.formErrors,isDirty:o.isDirty,onFieldChanged:s,onFieldBlur:function(e){},onSubmit:function(e){e.preventDefault();var r=o.formErrors,a=o.isDirty,c=!0;for(var i in r){var l=r[i];Array.isArray(l)&&l.length>0&&(c=!1)}if(c&&a){var s=t(o.formValues);n(s)}return!1},formApi:u}}(n,e.onFormSubmit,e.onProcess),a=r.formValues,c=r.formErrors,o=r.onFieldChanged,l=r.onFieldBlur,s=r.onSubmit,u=r.formApi,j=r.isDirty;return Object(g.jsx)("form",{onSubmit:s,children:Object(g.jsx)(C,{val:{formValues:a,formErrors:c,isDirty:j,onFieldChanged:o,onFieldBlur:l,formApi:u},children:t})})},_=function(e){var n=e.condition,t=e.children;return n?Object(g.jsxs)(g.Fragment,{children:[" ",t," "]}):null},E=function(e){var n=e.label,t=e.type,r=void 0===t?"h2":t,a=e.children;return Object(g.jsxs)("div",{children:[Object(g.jsx)(_,{condition:"h1"===r,children:Object(g.jsxs)("h1",{children:[" ",n," ",a," "]})}),Object(g.jsx)(_,{condition:"h2"===r,children:Object(g.jsxs)("h2",{children:[" ",n," ",a," "]})}),Object(g.jsx)(_,{condition:"h3"===r,children:Object(g.jsxs)("h2",{children:[" ",n," ",a," "]})})]})},B=function(){return Object(i.useContext)(N).formValues},R=t(4),D=t(5),V={trash:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFlSURBVFiF7ZdNSgNBEIW/BBExutG9bvUKQVcqnkavYVzqcTQ749JLCPECiYYQHF1YzWhNdU/3pCcI+qAZUtW8ev3yOj+QhnXgGngBPtQaAwPZ0xoGxmC9rtoUMJYhfaN3ROlEa3CnbNqvoKte7wNDYI5trx6U0p8D98BeSNAwQJ5r3YUEuJPvhDY1xC6lE14kv4eJqPDrDKwca556my78gHZgtIKZD3UbLvly4Cbj0FvhvNANKwNTeW5lFOC4prqRIuCRqn2xNa8AK4Q+Adbnf2wtiwPLIEnARJ7bGQU4rolu/EoH/pYAC12gAN6Bzre69UUVU+sIV4FxYMuBAniT3maM4hr0hOtVuGsFQGlVjpvgOEz7fQLcdcmRA8dRuYIhATmDGAzgvwDfLyIrhCOqVy6mFgyhT4AVwmNjX0ytUQif5XmGX2QMNoBzxRmFQ2BGvj8jM+AgVf0p8AQslhi8EI4T35BPpJCzrWHnFTIAAAAASUVORK5CYII=",add:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAygAAAMoBawMUsgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADLSURBVFiF7ZcxDsMgDEUfdGNg7wV6mCpDj8DUU/QkOUgPkSPkAOmeoUsHd4ApbRRApSgSX/JiS+YhLNsgIqQaoAEHDMEcoLNyZQJ0gCysy8mlydM10repXIBTpK8YwM/UABpAA9gfgFLKAPZLyIZYWr4Acca30phuZoHjSuwBzBE5RqAH7uAn2XKw/Msc+HFaC2CoXoQH4AVcKp1/q1+EGduQASY+33MCTPGNSESeK7ecQyxJ1YuwATSABrBbgDHSVwygj/Rtq/b3/A0V4pgUL0xePQAAAABJRU5ErkJggg=="},U=["onClick","label","type","icon","buttonClass","disabled","ripple","children"],w=function(e){var n=e.onClick,t=e.label,r=e.type,a=void 0===r?"button":r,c=e.icon,o=void 0===c?"":c,i=e.buttonClass,l=void 0===i?"regular":i,s=e.disabled,u=void 0!==s&&s,d=e.ripple,j=void 0===d||d,b=e.children,m=Object(D.a)(e,U),f="".concat(j?"ripple":"","  ").concat(l);return Object(g.jsx)("div",{className:"control-button",children:Object(g.jsxs)("button",Object(R.a)(Object(R.a)({onClick:n,className:f,disabled:u,type:a},m),{},{children:[Object(g.jsx)(_,{condition:o,children:Object(g.jsx)("img",{src:V[o],width:"15",alt:"add new"})}),b," ",t]}))})},S=function(){return Object(i.useContext)(N).formApi},F={project:"Terra",details:"Project Details",duration:12,units:" "},k=function(){var e=S().push,n=Object(i.useCallback)((function(){e(F,".notes")}));return Object(g.jsx)(w,{type:"img",icon:"add",onClick:n,label:"New",role:"addNew"})},T={isRequired:{errorText:"Please, select a project"}},P={isNumber:{errorText:"Value is not a Number"},isBetween:{errorText:"Should be Number and in ranfe of [1...100]",meta:{min:1,max:100}}},Y={isRequired:{errorText:"Please, provide Project description"}},Q={isRequired:{errorText:"Unit is required"}},I=function(){return Object(i.useContext)(N).onFieldChanged},H=function(e){var n=Object(i.useContext)(N).formValues;return b(n,e,null)},q=function(e){var n=e.validationErrors;return Object(g.jsx)(_,{condition:n.length>0,children:Object(g.jsx)("div",{className:"error-block",children:n.map((function(e){return Object(g.jsx)("span",{children:e},e)}))})})},M=function(e){var n=e.onChange,t=e.onBlur,r=e.value,a=e.name,c=e.label,o=e.validationErrors;return Object(g.jsxs)("div",{className:"form__group",children:[Object(g.jsx)("input",{type:"text",id:a,name:a,onChange:n,onBlur:t,value:r,className:"form__field",placeholder:c}),Object(g.jsx)("label",{htmlFor:a,className:"form__label",children:c}),Object(g.jsx)(q,{validationErrors:o})]})},J=function(e){return Object(i.useContext)(N).formErrors[e]||[]},L=function(e){var n=e.name,t=e.label,r=e.type,a=void 0===r?"text":r,c=e.validationRules,o=H(n),i=J(n),l=I();return Object(g.jsx)(M,{onChange:function(e){l(e,c)},onBlur:function(){},value:o,name:n,label:t,type:a,validationErrors:i})},G=function(e){var n=e.onChange,t=e.onBlur,r=e.value,a=e.name,c=e.label,o=e.validationErrors,i=e.rows,l=void 0===i?6:i;return Object(g.jsxs)("div",{className:"form__group",children:[Object(g.jsx)("textarea",{id:a,name:a,className:"form__field",placeholder:c,onChange:n,rows:l,onBlur:t,value:r}),Object(g.jsx)("label",{for:a,className:"form__label",children:c}),Object(g.jsx)(q,{validationErrors:o})]})},K=function(e){var n=e.name,t=e.label,r=e.validationRules,a=H(n),c=J(n),o=I();return Object(g.jsx)(G,{onChange:function(e){o(e,r)},onBlur:function(){},value:a,name:n,label:t,validationErrors:c})},z=["index","path","alt","buttonClass"],Z=function(e){var n=e.index,t=e.path,r=(e.alt,e.buttonClass),a=void 0===r?"icon__remove":r,c=Object(D.a)(e,z),o=S().removeAt,l=Object(i.useCallback)((function(){o(t,n)}));return Object(g.jsx)(w,Object(R.a)({onClick:l,buttonClass:a,ripple:!1,icon:"trash"},c))},X=t(14),W=l.a.forwardRef((function(e,n){return Object(g.jsxs)("div",{className:"form__group",children:[Object(g.jsx)("select",{id:e.name,name:e.name,className:"form__field",placeholder:e.label,onChange:e.onChange,value:e.elValue,ref:n,children:e.options.map((function(e){var n=e.value,t=e.label;return Object(g.jsx)("option",{value:n,children:t},t)}))}),Object(g.jsx)("label",{htmlFor:"message",className:"form__label",children:e.label}),Object(g.jsx)(q,{validationErrors:e.validationErrors})]})})),$=function(e){var n=e.name,t=e.label,r=e.validationRules,a=e.options,c=void 0===a?[]:a,o=e.isDynamic,i=void 0!==o&&o,s=e.fieldSrc,u=void 0===s?null:s,d=H(n),j=l.a.createRef(),b=J(n),m=I(),f=S(),v=f.getArrayValues,h=f.setField,A=i?Object(X.a)(v(u)):c;return A.find((function(e){return e.value===d}))||((A=A.filter((function(e){return e.value!==d}))).splice(0,0,{value:"",label:""}),d&&h(n,"",r)),Object(g.jsx)(W,{onChange:function(e){m(e,r)},onBlur:function(){},elValue:d,name:n,label:t,ref:j,options:A,validationErrors:b})},ee=function(e){var n=e.path,t=void 0===n?"":n,r=e.index,a=e.base;return Object(g.jsxs)("div",{className:"project__info",role:"project-info",children:[Object(g.jsx)("h4",{children:"Project Details:"}),Object(g.jsx)("div",{className:"project__info__controll__pane",children:Object(g.jsx)("div",{className:"project__info__controll__remove",children:Object(g.jsx)(Z,{path:a,index:r,alt:"remove note","data-testid":"remove-note"})})}),Object(g.jsxs)("div",{className:"project__info__general_info",children:[Object(g.jsx)($,{name:"".concat(t,".project"),label:"Project Name",validationRules:T,isDynamic:!0,fieldSrc:".projectNames"}),Object(g.jsx)(K,{name:"".concat(t,".details"),label:"Project Details",validationRules:Y})]}),Object(g.jsxs)("div",{className:"project__info__duration__period",children:[Object(g.jsx)("div",{className:"project__info__pane",children:Object(g.jsx)(L,{name:"".concat(t,".duration"),label:"Duration",validationRules:P})}),Object(g.jsx)("div",{className:"project__info__pane",children:Object(g.jsx)($,{name:"".concat(t,".units"),label:"Units",validationRules:Q,isDynamic:!0,fieldSrc:".units"})})]})]})},ne=function(){var e=B();return Object(g.jsxs)("div",{className:"projects",role:"project-notes-cantainer",children:[Object(g.jsx)(E,{label:"Projects",children:Object(g.jsx)(k,{})}),e.notes.map((function(e,n){var t=".notes[".concat(n,"]");return Object(g.jsx)(ee,{path:t,index:n,base:".notes"},t)}))]})},te=function(){var e=B();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Form dump"}),Object(g.jsx)("pre",{children:JSON.stringify(e,null,2)})]})},re=function(e){var n=e.children;return Object(g.jsx)("div",{className:"layout",children:Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)("section",{className:"content",children:Object(g.jsx)("div",{className:"columns",children:n})})})})},ae=function(e){var n=e.children,t=e.cssClass;return Object(g.jsx)("div",{className:t,children:n})},ce=Object(i.memo)((function(){var e=Object(i.useContext)(N).formErrors;return Object(g.jsx)("div",{children:Object(g.jsx)("pre",{children:JSON.stringify(e,null,2)})})})),oe=function(e){e.path;var n=l.a.useRef(),t=l.a.useRef(),r=S().push,a=Object(i.useCallback)((function(e){console.log(e.code),"NumpadEnter"!==e.code&&"Enter"!==e.code||(console.log("Adding new"),r({label:n.current,value:n.current},".projectNames"),t.current.value="")})),c=Object(i.useCallback)((function(e){n.current=e.target.value}));return Object(g.jsx)("div",{className:"tag__controll",children:Object(g.jsx)("input",{className:"tag__input",type:"text",onKeyPress:a,onChange:c,ref:t})})},ie=function(e){var n=e.index,t=e.base,r=e.label;return Object(g.jsxs)("div",{className:"tag__controll",children:[Object(g.jsx)(Z,{index:n,path:t,buttonClass:"icon__destroy"}),Object(g.jsx)("span",{children:r})]})},le=function(){var e=B();return Object(g.jsx)("div",{className:"projects__tags",role:"project-tags-cantainer",children:Object(g.jsxs)("div",{children:[e.projectNames.map((function(e,n){var t=".projectNames[".concat(n,"]");return Object(g.jsx)(ie,{path:t,index:n,base:".projectNames",label:e.value},t)})),Object(g.jsx)(oe,{})]})})},se=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"User Name "}),Object(g.jsx)(L,{name:".userName",label:"User Name",validationRules:T})]})},ue={test:{id:1342},userName:"John Doe",projectNames:[{label:"Bank",value:"Bank"},{label:"Tank",value:"Tank"},{label:"Sank",value:"Sank"}],units:[{label:"Story points",value:"sp"},{label:"Human Hours",value:"hh"},{label:"Epic Points",value:"ep"}],notes:[{project:"Sank",details:"Abidos details",duration:1,units:"sp"},{project:"Tank",details:"details",duration:12,units:"hh"}]},de=function(){var e=S().revertForm,n=function(){var e=Object(i.useContext)(N),n=e.formErrors,t=e.isDirty,r=!0;for(var a in n){var c=n[a];Array.isArray(c)&&c.length>0&&(r=!1)}return r&&t}(),t=H(".notes"),r=Object(i.useCallback)((function(){e()}));return Object(g.jsxs)("div",{className:"form__controlls_submit","data-testid":"form-controlls",children:[Object(g.jsxs)(_,{condition:t.length>0,children:[Object(g.jsx)(w,{type:"submit",disabled:!n,children:"Send Data"}),Object(g.jsx)(w,{onClick:r,buttonClass:"secondary",children:" Cancel "})]}),Object(g.jsx)(_,{condition:0==t.length,children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Please add some notes or Revert form"}),Object(g.jsx)("p",{children:" It makes no sense to send form without project notes!"})]})})]})};var je=function(){var e=Object(i.useCallback)((function(e){return{userName:e.userName,notes:e.notes}})),n=Object(i.useCallback)((function(e){alert("check console.log"),console.log(e)}));return Object(g.jsx)("div",{children:Object(g.jsx)(y,{initialValues:ue,onFormSubmit:n,onProcess:e,children:Object(g.jsxs)(re,{children:[Object(g.jsxs)(ae,{cssClass:"main",children:[Object(g.jsx)(se,{}),Object(g.jsx)(le,{}),Object(g.jsx)(ne,{}),Object(g.jsx)(de,{})]}),Object(g.jsxs)(ae,{cssClass:"sidebar",children:[Object(g.jsx)(te,{}),Object(g.jsx)(ce,{})]})]})})})},be=t(11),me=function(e){Object(c.a)(t,e);var n=Object(o.a)(t);function t(){return Object(r.a)(this,t),n.apply(this,arguments)}return Object(a.a)(t,[{key:"render",value:function(){return Object(g.jsx)(je,{})}}]),t}(l.a.Component);customElements.define("web-app",Object(be.a)(me,l.a,u.a))}},[[22,1,2]]]);
//# sourceMappingURL=main.eac88f82.chunk.js.map